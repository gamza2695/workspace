


------------------ [관리자 계정] ------------------

-- 01. example 계정을 생성하고 개채생성, 변경, 제거권한과,DB연결 권한을 추가하고 
--	   example2 계정을 생성하고 DB연결 권한과 VIEW 생성 권한을 추가한다.

-- example 계정 생성
ALTER SESSION SET "_ORACLE_SCRIPT" = TRUE;
CREATE USER example IDENTIFIED BY "4453";
GRANT CONNECT, RESOURCE TO example;
ALTER USER example DEFAULT TABLESPACE "A230724"
QUOTA 20M ON "A230724";


-- example2 계정 생성
ALTER SESSION SET "_ORACLE_SCRIPT" = TRUE;
CREATE USER example2 IDENTIFIED BY "4453";
GRANT CONNECT, CREATE VIEW TO example2;
ALTER USER example2 DEFAULT TABLESPACE "A230724"
QUOTA 20M ON "A230724";


-- 02. example2 계정의 DB연결 권한을 회수 후 계정 삭제한다.
REVOKE CONNECT FROM example2;
DROP USER example2 CASCADE;





------------------ [example 계정] ------------------

-- 03. example계정으로 접속해서 테이블 정의서를 참고하여 MEMBER 테이블과 BOARD 테이블을 생성한다.

-- MEMBER 테이블
CREATE TABLE MEMBER(
	MEMBER_NO NUMBER PRIMARY KEY,
	MEMBER_ID VARCHAR2(30) NOT NULL,
	MEMBER_PASSWORD VARCHAR2(30) NOT NULL,
	PHONE_NUMBER VARCHAR2(20),
	DELETE_YN CHAR(1) DEFAULT 'N' CHECK(DELETE_YN IN ('Y','N'))
);

COMMENT ON COLUMN MEMBER.MEMBER_NO IS '회원번호';
COMMENT ON COLUMN MEMBER.MEMBER_ID IS '아이디';
COMMENT ON COLUMN MEMBER.MEMBER_PASSWORD IS '비밀번호';
COMMENT ON COLUMN MEMBER.PHONE_NUMBER IS '핸드폰번호';
COMMENT ON COLUMN MEMBER.DELETE_YN IS '삭제여부';


-- BOARD 테이블
CREATE TABLE BOARD(
	BOARD_NO NUMBER PRIMARY KEY,
	BOARD_TITLE VARCHAR2(300) NOT NULL,
	BOARD_CONTENT VARCHAR2(4000) NOT NULL,
	BOARD_WRITER NUMBER REFERENCES MEMBER,	
	CREATE_DATE DATE DEFAULT SYSDATE
);

COMMENT ON COLUMN BOARD.BOARD_NO IS '글번호';
COMMENT ON COLUMN BOARD.BOARD_TITLE IS '글제목';
COMMENT ON COLUMN BOARD.BOARD_CONTENT IS '글내용';
COMMENT ON COLUMN BOARD.BOARD_WRITER IS '작성자';
COMMENT ON COLUMN BOARD.CREATE_DATE IS '작성일자';


-- 04. MEMBER 테이블과 BOARD 테이블에 다음과 같은 데이터를 추가한다.
-- 단, 회원번호와 글번호는 시퀀스를 생성하여 추가한다.
-- 시퀀스 :
-- SEQ_MEMBER_NO : 100부터 시작하여 100씩 증가
-- SEQ_BOARD_NO : 1부터 시작하여 1씩 증가


-- MEMBER 테이블

-- 회원번호 시퀀스 생성
CREATE SEQUENCE SEQ_MEMBER_NO
START WITH 100
INCREMENT BY 100
;

-- 데이터 입력
INSERT INTO MEMBER (MEMBER_NO, MEMBER_ID, MEMBER_PASSWORD, PHONE_NUMBER)
VALUES (SEQ_MEMBER_NO.NEXTVAL,'step1','step11',NULL);
INSERT INTO MEMBER (MEMBER_NO, MEMBER_ID, MEMBER_PASSWORD, PHONE_NUMBER)
VALUES (SEQ_MEMBER_NO.NEXTVAL,'step2','step22','010-1111-2222');
INSERT INTO MEMBER (MEMBER_NO, MEMBER_ID, MEMBER_PASSWORD, PHONE_NUMBER)
VALUES (SEQ_MEMBER_NO.NEXTVAL,'step3','step33',NULL);

-- 데이터 입력 확인
SELECT MEMBER_NO 회원번호, MEMBER_ID 아이디, MEMBER_PASSWORD 비밀번호, PHONE_NUMBER 전화번호
FROM MEMBER ORDER BY MEMBER_NO;


-- BOARD 테이블

-- 글번호 시퀀스 생성
CREATE SEQUENCE SEQ_BOARD_NO
START WITH 1
INCREMENT BY 1
;

-- 데이터 입력
INSERT INTO BOARD
VALUES (SEQ_BOARD_NO.NEXTVAL,'첫 글','스텝평가', 100, DEFAULT);
INSERT INTO BOARD
VALUES (SEQ_BOARD_NO.NEXTVAL,'두 번째 글','재밌다', 300, DEFAULT);
INSERT INTO BOARD
VALUES (SEQ_BOARD_NO.NEXTVAL,'세 번째 글','하하하', 200, DEFAULT);

-- 데이터 입력 확인
SELECT BOARD_NO 글번호, BOARD_TITLE 글제목, BOARD_CONTENT 글내용, 
BOARD_WRITER 작성자번호, CREATE_DATE 작성일자
FROM BOARD 
ORDER BY BOARD_NO;



-- 05. 다음과 같은 결과를 조회할 수 있도록 SELECT문을 작성한다.
SELECT BOARD_NO 글번호, BOARD_TITLE 제목, BOARD_CONTENT 내용,
MEMBER_ID 작성자, TO_CHAR(CREATE_DATE,'YY/MM/DD') 작성일
FROM BOARD
JOIN MEMBER ON(MEMBER_NO = BOARD_WRITER)
ORDER BY 글번호 DESC;

